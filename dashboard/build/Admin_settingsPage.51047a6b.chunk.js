"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[5895],{93500:(me,x,a)=>{a.r(x),a.d(x,{SettingsPage:()=>sn,default:()=>An});var e=a(67294),C=a(68547),r=a(49656),ne=a(78862),Z=a(97132),Le=a(15482),Ee=a(78143),fe=a(8610),Ne=a(23724),Y=a(62031),F=a(5493),S=a(34626),V=a(49425),de=a(9008),U=a(19408),te=a(70677),Ge=a(43257),$e=a.n(Ge),ze=a(84734),be=a.n(ze),z=a(45697),y=a.n(z),ue=a(68397),Ke=a(30741),re=a(80768),J=a.n(re),ae=a(27590),at=a.n(ae),Ie=a(73749);const Ye={currentStep:void 0},Pe=(p=Ye,c)=>(0,Ie.default)(p,l=>{switch(c.type){case"GO_TO":{l.currentStep=c.to;break}default:return l}});var Ue=a(75146);const Je={localImage:void 0},qe=(p=Je,c)=>(0,Ie.default)(p,l=>{switch(c.type){case"SET_LOCAL_IMAGE":{l.localImage=c.value;break}default:return l}}),D=({onChangeLogo:p,customLogo:c,goTo:l,Component:h,modalTitle:u,next:A,prev:M,currentStep:O})=>{const[{localImage:v},R]=(0,e.useReducer)(qe,Je),{formatMessage:Te}=(0,Z.useIntl)(),ge=ft=>{R({type:"SET_LOCAL_IMAGE",value:ft})},Xe=()=>{l(null)};return O?e.createElement(Ue.ModalLayout,{labelledBy:"modal",onClose:Xe},e.createElement(Ue.ModalHeader,null,e.createElement(V.Typography,{fontWeight:"bold",as:"h2",id:"modal"},Te(u))),e.createElement(h,{setLocalImage:ge,goTo:l,next:A,prev:M,onClose:Xe,asset:v||c,onChangeLogo:p})):null};D.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},D.propTypes={Component:y().elementType,currentStep:y().string,customLogo:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}),goTo:y().func.isRequired,modalTitle:y().shape({id:y().string,defaultMessage:y().string}),next:y().string,onChangeLogo:y().func.isRequired,prev:y().string};const k=D,N=750,_=100,pe=["image/jpeg","image/png","image/svg+xml"];var W=a(11402),Q=a(14276),oe=a(78384),G=a(67826),le=a(15804),xe=a(91767),ke=a(43435),Ze=a.n(ke),ot=(p,c,l)=>new Promise((h,u)=>{var A=v=>{try{O(l.next(v))}catch(R){u(R)}},M=v=>{try{O(l.throw(v))}catch(R){u(R)}},O=v=>v.done?h(v.value):Promise.resolve(v.value).then(A,M);O((l=l.apply(p,c)).next())});const _e={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},B={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},K=p=>new Promise(c=>{const l=new FileReader;l.onload=()=>{const h=new Image;h.onload=function(){c({width:h.width,height:h.height})},h.src=l.result},l.readAsDataURL(p)}),H=(p,c)=>({ext:p.name.split(".").pop(),size:p.size/1e3,name:p.name,url:URL.createObjectURL(p),rawFile:p,width:c.width,height:c.height}),f=p=>ot(void 0,null,function*(){let c;if(!pe.includes(p.type))throw c=new Error("File format"),c.displayMessage=_e,c;const h=yield K(p);if(!(h.width<=N&&h.height<=N))throw c=new Error("File sizing"),c.displayMessage=B,c;const A=H(p,h);if(!(A.size<=_))throw c=new Error("File sizing"),c.displayMessage=B,c;return A});var Fe=(p,c,l)=>new Promise((h,u)=>{var A=v=>{try{O(l.next(v))}catch(R){u(R)}},M=v=>{try{O(l.throw(v))}catch(R){u(R)}},O=v=>v.done?h(v.value):Promise.resolve(v.value).then(A,M);O((l=l.apply(p,c)).next())});const et=(0,oe.default)(xe.FieldInput)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,He=({setLocalImage:p,goTo:c,next:l,onClose:h})=>{const{formatMessage:u}=(0,Z.useIntl)(),[A,M]=(0,e.useState)(!1),[O,v]=(0,e.useState)(void 0),R=(0,e.useRef)(null),Te=()=>M(!0),ge=()=>M(!1),Xe=tt=>{tt.preventDefault(),R.current.click()},ft=()=>Fe(void 0,null,function*(){ge();const tt=R.current.files[0];if(!!tt)try{const lt=yield f(tt);p(lt),c(l)}catch(lt){if(lt.displayMessage)v(u(lt.displayMessage,{size:_,dimension:N})),R.current.focus();else throw lt}}),it=()=>A?"primary500":O?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(F.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(xe.Field,{name:"logo-upload",error:O},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(de.Stack,{spacing:2},e.createElement(G.Flex,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:A?"primary100":"neutral100",borderColor:it(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:Te,onDragLeave:ge},e.createElement(le.Icon,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Ze(),"aria-hidden":!0}),e.createElement(F.Box,{paddingTop:3,paddingBottom:5},e.createElement(V.Typography,{variant:"delta",as:"span"},u({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(et,{accept:pe,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:ft,ref:R,id:"logo-upload"}),e.createElement(U.Button,{type:"button",onClick:Xe},u({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(F.Box,{paddingTop:6},e.createElement(V.Typography,{variant:"pi",textColor:"neutral600"},u({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:_,dimension:N})))),e.createElement(xe.FieldError,null)))))),e.createElement(Ue.ModalFooter,{startActions:e.createElement(U.Button,{onClick:h,variant:"tertiary"},u({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};He.defaultProps={next:null},He.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const q=He;var he=a(55967),Se=a(51721),ln=(p,c,l)=>new Promise((h,u)=>{var A=v=>{try{O(l.next(v))}catch(R){u(R)}},M=v=>{try{O(l.throw(v))}catch(R){u(R)}},O=v=>v.done?h(v.value):Promise.resolve(v.value).then(A,M);O((l=l.apply(p,c)).next())});const Bt=p=>ln(void 0,null,function*(){try{const c=yield Se.ZP.get(p,{responseType:"blob",timeout:8e3});return new File([c.data],c.config.url,{type:c.headers["content-type"]})}catch(c){throw c.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},c}});var wt=(p,c,l)=>new Promise((h,u)=>{var A=v=>{try{O(l.next(v))}catch(R){u(R)}},M=v=>{try{O(l.throw(v))}catch(R){u(R)}},O=v=>v.done?h(v.value):Promise.resolve(v.value).then(A,M);O((l=l.apply(p,c)).next())});const vt=({goTo:p,next:c,onClose:l,setLocalImage:h})=>{const{formatMessage:u}=(0,Z.useIntl)(),[A,M]=(0,e.useState)(""),[O,v]=(0,e.useState)(null),R=ge=>{M(ge.target.value)},Te=()=>wt(void 0,null,function*(){try{const ge=yield Bt(A),Xe=yield f(ge);h(Xe),p(c)}catch(ge){if(ge.displayMessage)v(u(ge.displayMessage,{size:_,dimension:N}));else throw ge}});return e.createElement("form",{onSubmit:ge=>{ge.preventDefault(),Te()}},e.createElement(F.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(he.TextInput,{label:u({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:O,onChange:R,value:A,name:"logo-url"})),e.createElement(Ue.ModalFooter,{startActions:e.createElement(U.Button,{onClick:l,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(U.Button,{type:"submit"},u({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};vt.defaultProps={next:null},vt.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const jt=vt,Nt=({setLocalImage:p,goTo:c,next:l,onClose:h})=>{const{formatMessage:u}=(0,Z.useIntl)();return e.createElement(W.TabGroup,{label:u({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(F.Box,{paddingLeft:8,paddingRight:8},e.createElement(W.Tabs,null,e.createElement(W.Tab,null,u({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(W.Tab,null,u({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Q.Divider,null)),e.createElement(W.TabPanels,null,e.createElement(W.TabPanel,null,e.createElement(q,{onClose:h,setLocalImage:p,goTo:c,next:l})),e.createElement(W.TabPanel,null,e.createElement(jt,{onClose:h,setLocalImage:p,goTo:c,next:l}))))};Nt.defaultProps={next:null},Nt.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const St=Nt;var st=a(73962);const Tt=({asset:p})=>{const{formatMessage:c}=(0,Z.useIntl)();return e.createElement(st.Card,null,e.createElement(st.CardHeader,null,e.createElement(st.CardAsset,{size:"S",src:p.url})),e.createElement(st.CardBody,null,e.createElement(st.CardContent,null,e.createElement(st.CardTitle,null,p.name),e.createElement(st.CardSubtitle,null,`${p.ext.toUpperCase()} - ${p.width}\u2715${p.height}`)),e.createElement(st.CardBadge,null,c({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Tt.propTypes={asset:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}).isRequired};const cn=Tt,Ct=({onClose:p,asset:c,prev:l,next:h,goTo:u,setLocalImage:A,onChangeLogo:M})=>{const{formatMessage:O}=(0,Z.useIntl)(),v=()=>{A(void 0),u(l)},R=()=>{M(c),u(h)};return e.createElement(e.Fragment,null,e.createElement(F.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(G.Flex,{justifyContent:"space-between",paddingBottom:6},e.createElement(G.Flex,{direction:"column",alignItems:"flex-start"},e.createElement(V.Typography,{variant:"pi",fontWeight:"bold"},O({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(V.Typography,{variant:"pi",textColor:"neutral500"},O({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(U.Button,{onClick:v,variant:"secondary"},O({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(F.Box,{maxWidth:(0,C.pxToRem)(180)},e.createElement(cn,{asset:c}))),e.createElement(Ue.ModalFooter,{startActions:e.createElement(U.Button,{onClick:p,variant:"tertiary"},O({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(U.Button,{onClick:R},O({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Ct.defaultProps={next:null,prev:null},Ct.propTypes={goTo:y().func.isRequired,asset:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}).isRequired,next:y().string,onClose:y().func.isRequired,onChangeLogo:y().func.isRequired,prev:y().string,setLocalImage:y().func.isRequired};const Wt={upload:{Component:St,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Ct,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},At=({customLogo:p,defaultLogo:c,onChangeLogo:l,onResetMenuLogo:h})=>{const[{currentStep:u},A]=(0,e.useReducer)(Pe,Ye),{Component:M,next:O,prev:v,modalTitle:R}=Wt[u]||{},{formatMessage:Te}=(0,Z.useIntl)(),ge=Xe=>{A({type:"GO_TO",to:Xe})};return e.createElement(e.Fragment,null,e.createElement(ue.CarouselInput,{label:Te({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"}),selectedSlide:0,hint:Te({id:"Settings.application.customization.carousel-hint",defaultMessage:"Change the admin panel logo (Max dimension: {dimension}x{dimension}, Max file size: {size}KB)"},{size:_,dimension:N}),previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:(p==null?void 0:p.name)||"logo.png",actions:e.createElement(ue.CarouselActions,null,e.createElement(Ke.IconButton,{onClick:()=>ge(p?"pending":"upload"),label:Te({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(J(),null)}),p&&e.createElement(Ke.IconButton,{onClick:h,label:Te({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(at(),null)}))},e.createElement(ue.CarouselSlide,{label:Te({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(F.Box,{maxHeight:"40%",maxWidth:"40%",as:"img",src:(p==null?void 0:p.url)||c,alt:Te({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(k,{Component:M,currentStep:u,onChangeLogo:l,customLogo:p,goTo:ge,next:O,prev:v,modalTitle:R}))};At.defaultProps={customLogo:null},At.propTypes={customLogo:y().shape({url:y().string,name:y().string}),defaultLogo:y().string.isRequired,onChangeLogo:y().func.isRequired,onResetMenuLogo:y().func.isRequired};const Ot=At,Et={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}}},dt=(p=Et,c)=>(0,Ie.default)(p,l=>{switch(c.type){case"SET_CUSTOM_MENU_LOGO":{l.menuLogo.display=c.value,l.menuLogo.submit.rawFile=c.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{l.menuLogo.display=null,l.menuLogo.submit={rawFile:null,isReset:!0};break}default:return l}});var kn=a(82492),Rt=a.n(kn);const rt=(p,c)=>Rt()(p,{menuLogo:{display:c.menuLogo}}),$t=(0,e.forwardRef)(({projectSettingsStored:p},c)=>{const{formatMessage:l}=(0,Z.useIntl)(),{trackUsage:h}=(0,C.useTracking)(),{logos:{menu:u}}=(0,Ee.um)(),[{menuLogo:A},M]=(0,e.useReducer)(dt,Et,()=>rt(Et,p)),O=R=>{M({type:"SET_CUSTOM_MENU_LOGO",value:R})},v=()=>{h("didClickResetLogo"),M({type:"RESET_CUSTOM_MENU_LOGO"})};return(0,e.useImperativeHandle)(c,()=>({getValues:()=>({menuLogo:A.submit})})),e.createElement(F.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(V.Typography,{variant:"delta",as:"h3"},l({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(S.Grid,{paddingTop:4},e.createElement(S.GridItem,{col:6,s:12},e.createElement(Ot,{onChangeLogo:O,customLogo:A.display,defaultLogo:u.default,onResetMenuLogo:v}))))});$t.defaultProps={projectSettingsStored:null},$t.propTypes={projectSettingsStored:y().shape({menuLogo:y().shape({url:y().string,name:y().string})})};const un=$t;var Ut=a(23998),pn=a(68718),Zn=a.n(pn),pt=Object.defineProperty,Vn=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable,Vt=(p,c,l)=>c in p?pt(p,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[c]=l,Gt=(p,c)=>{for(var l in c||(c={}))kt.call(c,l)&&Vt(p,l,c[l]);if(Dt)for(var l of Dt(c))Zt.call(c,l)&&Vt(p,l,c[l]);return p},zt=(p,c)=>Vn(p,mt(c));const Kt=p=>Zn()(p,(c,l,h)=>{l&&l.url?c[h]=zt(Gt({},l),{url:(0,C.prefixFileUrlWithBackendUrl)(l.url)}):c[h]=l},{});var xt=(p,c,l)=>new Promise((h,u)=>{var A=v=>{try{O(l.next(v))}catch(R){u(R)}},M=v=>{try{O(l.throw(v))}catch(R){u(R)}},O=v=>v.done?h(v.value):Promise.resolve(v.value).then(A,M);O((l=l.apply(p,c)).next())});const gn=()=>xt(void 0,null,function*(){const{data:p}=yield Ut.be.get("/admin/project-settings");return Kt(p)}),Gn=p=>xt(void 0,null,function*(){const{data:c}=yield Ut.be.post("/admin/project-settings",p);return Kt(c)}),Ht=p=>{const c=new FormData;return Object.entries(p).forEach(([l,h])=>{h&&h.rawFile instanceof File&&c.append(l,h.rawFile),h&&h.isReset&&c.append(l,null)}),c};var fn=(p,c,l)=>new Promise((h,u)=>{var A=v=>{try{O(l.next(v))}catch(R){u(R)}},M=v=>{try{O(l.throw(v))}catch(R){u(R)}},O=v=>v.done?h(v.value):Promise.resolve(v.value).then(A,M);O((l=l.apply(p,c)).next())});const Xt=[{action:"admin::project-settings.update",subject:null}],hn=()=>{const p=(0,e.useRef)(),c=(0,C.useNotification)(),{trackUsage:l}=(0,C.useTracking)(),{formatMessage:h}=(0,Z.useIntl)(),u=(0,Ne.useQueryClient)();(0,C.useFocusWhenNavigate)();const A=(0,C.useAppInfos)(),{shouldUpdateStrapi:M,latestStrapiReleaseTag:O,strapiVersion:v}=A,{updateProjectSettings:R}=(0,Ee.um)(),{data:Te}=(0,Ne.useQuery)("project-settings",gn),ge=A.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee",Xe=(0,Ne.useMutation)(it=>Gn(it),{onSuccess(it){return fn(this,arguments,function*({menuLogo:tt}){yield u.invalidateQueries("project-settings",{refetchActive:!0}),R({menuLogo:tt==null?void 0:tt.url})})}}),ft=()=>{const it=p.current.getValues(),tt=Ht(it);Xe.mutate(tt,{onSuccess(){const{menuLogo:lt}=it;lt.rawFile&&l("didChangeLogo")},onError(){c({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}})};return e.createElement(ne.Layout,null,e.createElement(C.SettingsPageTitle,{name:"Application"}),e.createElement(Y.Main,null,e.createElement(ne.HeaderLayout,{title:h({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:h({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:e.createElement(U.Button,{onClick:ft,startIcon:e.createElement(be(),null)},h({id:"global.save",defaultMessage:"Save"}))}),e.createElement(ne.ContentLayout,null,e.createElement(de.Stack,{spacing:6},e.createElement(F.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(de.Stack,{spacing:5},e.createElement(V.Typography,{variant:"delta",as:"h3"},h({id:"global.details",defaultMessage:"Details"})),e.createElement(S.Grid,{paddingTop:1},e.createElement(S.GridItem,{col:6,s:12},e.createElement(V.Typography,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(V.Typography,{as:"p"},"v",v),e.createElement(te.Link,{href:A.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:e.createElement($e(),null)},h({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(S.GridItem,{col:6,s:12},e.createElement(V.Typography,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(V.Typography,{as:"p"},h({id:ge,defaultMessage:`${A.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(S.Grid,{paddingTop:1},e.createElement(S.GridItem,{col:6,s:12},M&&e.createElement(te.Link,{href:`https://github.com/strapi/strapi/releases/tag/${O}`,isExternal:!0,endIcon:e.createElement($e(),null)},h({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(S.GridItem,{col:6,s:12},e.createElement(te.Link,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement($e(),null)},h({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(F.Box,{paddingTop:1},e.createElement(V.Typography,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(V.Typography,{as:"p"},A.nodeVersion)))),Te&&e.createElement(C.CheckPermissions,{permissions:Xt},e.createElement(un,{ref:p,projectSettingsStored:Te}))))))};var Hn=a(94654),Yt=a.n(Hn);const yn=p=>Yt()(p,l=>l.links).map(l=>(0,fe.ot)(l.Component,l.to,l.exact||!1)),Qt=p=>p.filter(c=>!c.links.every(l=>l.isDisplayed===!1));var Jt=a(42982),nt=a(15861),qt=a(64687),ye=a.n(qt),_t=function(){return window&&window.strapi&&window.strapi.isEE?a(26789).Z:a(73871).Z}(),Qn=function(){return window&&window.strapi&&window.strapi.isEE?a(64527).Z:a(85302).Z}(),vn=[{Component:function(){return{default:Qn}},to:"/settings/roles",exact:!0},{Component:function(){return{default:_t}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:_t}},to:"/settings/roles/new",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(2544).then(a.bind(a,92100));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/roles/:id",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(5199).then(a.bind(a,46903));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/users",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4263).then(a.bind(a,22282));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/users/:id",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(4675),a.e(5162)]).then(a.bind(a,3672));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks/create",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(4675),a.e(5162)]).then(a.bind(a,9311));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks/:id",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4121).then(a.bind(a,6784));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(8056).then(a.bind(a,8421));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(8245),a.e(7375),a.e(4299)]).then(a.bind(a,9683));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens/create",exact:!0},{Component:function(){return(0,nt.Z)(ye().mark(function c(){var l;return ye().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(8245),a.e(7375),a.e(92)]).then(a.bind(a,28465));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens/:id",exact:!0}];const Cn=vn;var En=function(){return window&&window.strapi&&window.strapi.isEE?a(5420).Z:a(35301).Z}();const en=[].concat((0,Jt.Z)(En),(0,Jt.Z)(Cn));var gt=a(37909),bn=Object.defineProperty,tn=Object.defineProperties,Pn=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,Sn=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,on=(p,c,l)=>c in p?bn(p,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[c]=l,Lt=(p,c)=>{for(var l in c||(c={}))Sn.call(c,l)&&on(p,l,c[l]);if(nn)for(var l of nn(c))Mt.call(c,l)&&on(p,l,c[l]);return p},It=(p,c)=>tn(p,Pn(c));const an=({menu:p})=>{const{formatMessage:c}=(0,Z.useIntl)(),h=Qt(p).map(A=>It(Lt({},A),{title:A.intlLabel,links:A.links.map(M=>It(Lt({},M),{title:M.intlLabel,name:M.id}))})),u=c({id:"global.settings",defaultMessage:"Settings"});return e.createElement(gt.SubNav,{ariaLabel:u},e.createElement(gt.SubNavHeader,{label:u}),e.createElement(gt.SubNavSections,null,h.map(A=>e.createElement(gt.SubNavSection,{key:A.id,label:c(A.intlLabel)},A.links.map(M=>e.createElement(gt.SubNavLink,{as:r.NavLink,withBullet:M.hasNotification,to:M.to,key:M.id},c(M.intlLabel)))))))};an.propTypes={menu:y().array.isRequired};const Tn=an;function sn(){const{settingId:p}=(0,r.useParams)(),{settings:c}=(0,C.useStrapiApp)(),{formatMessage:l}=(0,Z.useIntl)(),{isLoading:h,menu:u}=(0,Ee.Te)(),A=(0,e.useMemo)(()=>(0,fe.WW)(en.map(({to:v,Component:R,exact:Te})=>(0,fe.ot)(R,v,Te))),[]),M=yn(c);if(h)return e.createElement(C.LoadingIndicatorPage,null);if(!p)return e.createElement(r.Redirect,{to:"/settings/application-infos"});const O=l({id:"global.settings",defaultMessage:"Settings"});return e.createElement(ne.Layout,{sideNav:e.createElement(Tn,{menu:u})},e.createElement(Le.Helmet,{title:O}),e.createElement(r.Switch,null,e.createElement(r.Route,{path:"/settings/application-infos",component:hn,exact:!0}),A,M))}const An=(0,e.memo)(sn)},73871:(me,x,a)=>{a.d(x,{Z:()=>ne});var e=a(67294),C=a(49656);const ne=()=>e.createElement(C.Redirect,{to:"/404"})},79578:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!0},56195:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!0},35820:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!0},28472:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!0},99047:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!0},21568:(me,x,a)=>{a.d(x,{Z:()=>Ja});var e=a(67294),C=a(45697),r=a.n(C),ne=a(68547),Z=a(11402),Le=a(18721),Ee=a.n(Le),fe=a(41609),Ne=a.n(fe),Y=a(97132),F=a(5493),S=a(78384),V=a(89734),de=a.n(V),U=a(70885),te=a(11132),Ge=a.n(te),$e=a(64763),ze=a.n($e),be=a(59522),z=a(67826),y=a(27361),ue=a.n(y),Ke=a(57557),re=a.n(Ke),J=a(78143),ae=a(70736),at=a.n(ae),Ie=a(19408);const Ye=S.default.div`
  position: relative;

  ${({hasConditions:o,disabled:t,theme:n})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${t?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,Qe=({onClick:o,className:t,hasConditions:n,variant:s})=>{const{formatMessage:i}=(0,Y.useIntl)();return e.createElement(Ye,{hasConditions:n,className:t},e.createElement(Ie.Button,{variant:s,startIcon:e.createElement(at(),null),onClick:o},i({id:"global.settings",defaultMessage:"Settings"})))};Qe.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Qe.propTypes={onClick:r().func.isRequired,className:r().string,hasConditions:r().bool,variant:r().string};const Pe=(0,S.default)(Qe)``;var Ue=a(14276),Je=a(9008),ie=a(75146),qe=a(68115),D=a(49425),k=a(73749),N=a(7739),_=a.n(N),pe=a(11700),W=a.n(pe),Q=a(4942),oe=a(42982),G=a(43808);const le=`${120/16}rem`,xe=`${200/16}rem`,ke=`${53/16}rem`;function Ze(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,s)}return n}function ot(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ze(Object(n),!0).forEach(function(s){(0,Q.Z)(o,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach(function(s){Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(n,s))})}return o}var _e=function(){return window&&window.strapi&&window.strapi.isEE?a(53273).Z:a(79578).Z}(),B=(0,S.default)(z.Flex).withConfig({displayName:"ActionRow__FlexWrapper",componentId:"sc-1bqpgdl-0"})(["height:",";"],ke),K=function(t){var n=t.arrayOfOptionsGroupedByCategory,s=t.isFormDisabled,i=t.isGrey,d=t.label,m=t.name,g=t.onChange,E=t.value,b=(0,Y.useIntl)(),P=b.formatMessage,L=n.reduce(function(w,j){var T=(0,U.Z)(j,2),I=T[0],X=T[1],se={label:W()(I),children:X.map(function(Oe){return{label:Oe.displayName,value:Oe.id}})};return[].concat((0,oe.Z)(w),[se])},[]),$=Object.values(E).map(function(w){return Object.entries(w).filter(function(j){var T=(0,U.Z)(j,2),I=T[1];return I}).map(function(j){var T=(0,U.Z)(j,1),I=T[0];return I})}).flat(),ee=function(j){var T=(0,U.Z)(n,1),I=(0,U.Z)(T[0],2),X=I[1],se=X.reduce(function(Oe,ve){return ot((0,Q.Z)({},ve.id,j.includes(ve.id)),Oe)},{});g(m,se)};return e.createElement(B,{as:"li",background:i?"neutral100":"neutral0"},e.createElement(z.Flex,{paddingLeft:6,style:{width:180}},e.createElement(D.Typography,{variant:"sigma",textColor:"neutral600"},P({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(D.Typography,{variant:"sigma",title:d,textColor:"primary600",ellipsis:!0},P({id:"Settings.roles.form.permissions.".concat(d.toLowerCase()),defaultMessage:d})),e.createElement(D.Typography,{variant:"sigma",textColor:"neutral600"},"\xA0",P({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(F.Box,{style:{maxWidth:430,width:"100%"}},e.createElement(G.MultiSelectNested,{id:m,customizeContent:function(j){return"".concat(j.length," currently selected")},onChange:ee,value:$,options:L,disabled:s||_e})))};K.propTypes={arrayOfOptionsGroupedByCategory:r().array.isRequired,isFormDisabled:r().bool.isRequired,isGrey:r().bool.isRequired,label:r().string.isRequired,name:r().string.isRequired,value:r().object.isRequired,onChange:r().func.isRequired};const H=K;var f=a(96486);const Fe=(o,t)=>o.reduce((n,s)=>(n[s.id]=(0,f.get)(t,s.id,!1),n),{}),et=(o,t)=>o.reduce((n,s)=>{const[i,d]=s,m=Fe(d,t);return n[i]=m,n},{}),q=(o,t,n)=>o.reduce((s,i)=>{const d=(0,f.get)(t,[...i.pathToConditionsObject,"conditions"],{}),m=et(n,d);return s[i.pathToConditionsObject.join("..")]=m,s},{});var he=Object.defineProperty,Se=Object.getOwnPropertySymbols,ln=Object.prototype.hasOwnProperty,Wn=Object.prototype.propertyIsEnumerable,Bt=(o,t,n)=>t in o?he(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,wt=(o,t)=>{for(var n in t||(t={}))ln.call(t,n)&&Bt(o,n,t[n]);if(Se)for(var n of Se(t))Wn.call(t,n)&&Bt(o,n,t[n]);return o};const vt=({actions:o,headerBreadCrumbs:t,isFormDisabled:n,onClosed:s,onToggle:i})=>{const{formatMessage:d}=(0,Y.useIntl)(),{availableConditions:m,modifiedData:g,onChangeConditions:E}=(0,J.$_)(),b=(0,e.useMemo)(()=>Object.entries(_()(m,"category")),[m]),P=o.filter(({isDisplayed:T,hasSomeActionsSelected:I,hasAllActionsSelected:X})=>T&&(I||X)),L=(0,e.useMemo)(()=>q(P,g,b),[P,g,b]),[$,ee]=(0,e.useState)(L),w=(T,I)=>{ee((0,k.default)(X=>{X[T]||(X[T]={}),X[T].default||(X[T].default={}),X[T].default=I}))},j=()=>{const T=Object.entries($).reduce((I,X)=>{const[se,Oe]=X,ve=Object.values(Oe).reduce((Re,Be)=>wt(wt({},Re),Be),{});return I[se]=ve,I},{});E(T),i()};return e.createElement(ie.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:s},e.createElement(ie.ModalHeader,null,e.createElement(qe.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:t.join(", ")},t.map(T=>e.createElement(qe.Crumb,{key:T},W()(d({id:T,defaultMessage:T})))))),e.createElement(F.Box,{padding:8},e.createElement(Je.Stack,{spacing:6},e.createElement(D.Typography,{variant:"beta",as:"h2"},d({id:"Settings.permissions.conditions.define-conditions",defaultMessage:"Define conditions"})),e.createElement(F.Box,null,e.createElement(Ue.Divider,null)),e.createElement(F.Box,null,P.length===0&&e.createElement(D.Typography,null,d({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,P.map(({actionId:T,label:I,pathToConditionsObject:X},se)=>{const Oe=X.join("..");return e.createElement(H,{key:T,arrayOfOptionsGroupedByCategory:b,label:I,isFormDisabled:n,isGrey:se%2===0,name:Oe,onChange:w,value:ue()($,Oe,{})})}))))),e.createElement(ie.ModalFooter,{startActions:e.createElement(Ie.Button,{variant:"tertiary",onClick:i},d({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(Ie.Button,{onClick:j},d({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};vt.propTypes={actions:r().arrayOf(r().shape({actionId:r().string.isRequired,checkboxName:r().string,hasSomeActionsSelected:r().bool.isRequired,hasAllActionsSelected:r().bool,isDisplayed:r().bool.isRequired,label:r().string})).isRequired,headerBreadCrumbs:r().arrayOf(r().string).isRequired,isFormDisabled:r().bool.isRequired,onClosed:r().func.isRequired,onToggle:r().func.isRequired};const jt=vt,St=S.default.div`
  width: ${le};
`,Tt=(0,S.default)(z.Flex)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;var cn=Object.defineProperty,Ct=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,Wt=(o,t,n)=>t in o?cn(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,At=(o,t)=>{for(var n in t||(t={}))$n.call(t,n)&&Wt(o,n,t[n]);if(Ct)for(var n of Ct(t))Un.call(t,n)&&Wt(o,n,t[n]);return o};const Ot=({children:o,isCollapsable:t,isActive:n,isFormDisabled:s,label:i,onChange:d,onClick:m,checkboxName:g,someChecked:E,value:b})=>{const{formatMessage:P}=(0,Y.useIntl)();return e.createElement(z.Flex,{alignItems:"center",paddingLeft:6,style:{width:xe,flexShrink:0}},e.createElement(F.Box,{paddingRight:2},e.createElement(be.BaseCheckbox,{name:g,"aria-label":P({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:s,onValueChange:L=>d({target:{name:g,value:L}}),indeterminate:E,value:b})),e.createElement(Tt,At({title:i,alignItems:"center",isCollapsable:t},t&&{onClick:m,"aria-expanded":n,onKeyDown:({key:L})=>(L==="Enter"||L===" ")&&m(),tabIndex:0,role:"button"}),e.createElement(D.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},W()(i)),o))};Ot.defaultProps={children:null,checkboxName:"",onChange(){},value:!1,someChecked:!1,isCollapsable:!1},Ot.propTypes={checkboxName:r().string,children:r().node,label:r().string.isRequired,isCollapsable:r().bool,isFormDisabled:r().bool.isRequired,onChange:r().func,onClick:r().func.isRequired,someChecked:r().bool,value:r().bool,isActive:r().bool.isRequired};const Et=(0,e.memo)(Ot),dn=o=>(0,f.isObject)(o)?(0,f.flattenDeep)(Object.values(o).map(t=>(0,f.isObject)(t)?dn(t):t)):[],dt=dn,Rt=o=>o?Object.keys(o).reduce((t,n)=>(n!=="conditions"&&(t[n]=o[n]),t),{}):null,rt=o=>{const t=Rt(o),n=dt(t);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const s=n.every(d=>d),i=n.some(d=>d)&&!s;return{hasAllActionsSelected:s,hasSomeActionsSelected:i}},un=(o,t,n)=>o.map(({actionId:s,isDisplayed:i,applyToProperties:d,label:m})=>{if(!i)return{actionId:s,hasSomeActionsSelected:!1,isDisplayed:i};const g=[...n.split(".."),s],E=(0,f.isEmpty)(d)?[...g,"properties","enabled"]:g,b=E.join(".."),P=(0,f.get)(t,[...g,"conditions"],null),L=dt(P).some(j=>j);if((0,f.isEmpty)(d)){const j=(0,f.get)(t,E,!1);return{actionId:s,checkboxName:b,hasAllActionsSelected:j,hasConditions:L,hasSomeActionsSelected:j,isDisplayed:i,isParentCheckbox:!1,label:m,pathToConditionsObject:g}}const $=(0,f.get)(t,E,null),{hasAllActionsSelected:ee,hasSomeActionsSelected:w}=rt($);return{actionId:s,checkboxName:b,hasAllActionsSelected:ee,hasConditions:L,hasSomeActionsSelected:w,isDisplayed:i,isParentCheckbox:!0,label:m,pathToConditionsObject:g}});var Ut=a(99962),pn=a.n(Ut);const pt=(0,S.default)(pn())`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,mt=o=>`
  ${D.Typography} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${pt} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;var Dt=function(){return window&&window.strapi&&window.strapi.isEE?a(20591).Z:a(56195).Z}(),kt=function o(t,n){return`
  `.concat(Zt,` {
    background-color: `).concat(t.colors.primary100,`;
    color: `).concat(t.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(zt,` {
    display: flex;
  }
  `).concat(Pe,` {
    display: block;
  }
  &:hover {
   `).concat(mt(t),`
  }

  &:focus-within {
    `).concat(function(s){var i=s.theme,d=s.isActive;return o(i,d)},`
  }
  
`)},Zt=S.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],ke,function(o){var t=o.isGrey,n=o.theme;return t?n.colors.neutral100:n.colors.neutral0}),Vt=S.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],Pe,function(o){var t=o.isActive,n=o.theme;return t&&kt(n,t)},function(o){var t=o.theme,n=o.isActive;return kt(t,n)}),Gt=(0,S.default)(z.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],le),zt=(0,S.default)(F.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(o){var t=o.theme;return t.colors.primary600}),mn=S.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(o){var t=o.theme;return t.colors.primary600}),Kt=(0,S.default)(F.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),xt=function(t){var n=t.availableActions,s=t.isActive,i=t.isGrey,d=t.isFormDisabled,m=t.label,g=t.onClickToggle,E=t.pathToData,b=(0,e.useState)(!1),P=(0,U.Z)(b,2),L=P[0],$=P[1],ee=(0,Y.useIntl)(),w=ee.formatMessage,j=(0,J.$_)(),T=j.modifiedData,I=j.onChangeParentCheckbox,X=j.onChangeSimpleCheckbox,se=function(){$(function(Ae){return!Ae})},Oe=function(){$(!1)},ve=ue()(T,E.split(".."),{}),Re=(0,e.useMemo)(function(){return Object.keys(ve).reduce(function(ce,Ae){return ce[Ae]=re()(ve[Ae],"conditions"),ce},{})},[ve]),Be=rt(Re),Me=Be.hasAllActionsSelected,ht=Be.hasSomeActionsSelected,Ce=(0,e.useMemo)(function(){return un(n,T,E)},[n,T,E]),we=Ce.some(function(ce){var Ae=ce.hasConditions;return Ae});return e.createElement(Vt,{isActive:s},e.createElement(Zt,{isGrey:i},e.createElement(Et,{isCollapsable:!0,isFormDisabled:d,label:m,checkboxName:E,onChange:I,onClick:g,someChecked:ht,value:Me,isActive:s},e.createElement(zt,{paddingLeft:2},s?e.createElement(ze(),null):e.createElement(Ge(),null))),e.createElement(z.Flex,{style:{flex:1}},Ce.map(function(ce){var Ae=ce.actionId,De=ce.hasConditions,je=ce.hasAllActionsSelected,We=ce.hasSomeActionsSelected,ut=ce.isDisplayed,Ve=ce.isParentCheckbox,ct=ce.checkboxName,bt=ce.label;return ut?Ve?e.createElement(Gt,{key:Ae,justifyContent:"center",alignItems:"center"},De&&e.createElement(mn,null),e.createElement(be.BaseCheckbox,{disabled:d||Dt,name:ct,"aria-label":w({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(bt," ").concat(m)}),onValueChange:function(yt){I({target:{name:ct,value:yt}})},indeterminate:We,value:je})):e.createElement(Gt,{key:Ae,justifyContent:"center",alignItems:"center"},De&&e.createElement(mn,null),e.createElement(be.BaseCheckbox,{disabled:d||Dt,indeterminate:De,name:ct,onValueChange:function(yt){X({target:{name:ct,value:yt}})},value:je})):e.createElement(St,{key:Ae})})),L&&e.createElement(jt,{headerBreadCrumbs:[m,"app.components.LeftMenuLinkContainer.settings"],actions:Ce,isFormDisabled:d,onClosed:Oe,onToggle:se})),e.createElement(Kt,null,e.createElement(Pe,{onClick:se,hasConditions:we})))};xt.propTypes={availableActions:r().array.isRequired,isActive:r().bool.isRequired,isGrey:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggle:r().func.isRequired,pathToData:r().string.isRequired};const gn=xt,zn=(o,t)=>o.map(n=>{const s=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(t)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:s}}),Ht=(0,S.default)(z.Flex)`
  width: ${le};
  flex-shrink: 0;
`,fn=(0,S.default)(z.Flex)`
  width: ${xe};
  height: ${ke};
  flex-shrink: 0;
`,Xt=({headers:o,label:t})=>{const{formatMessage:n}=(0,Y.useIntl)(),s=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:t});return e.createElement(z.Flex,null,e.createElement(fn,{alignItems:"center",paddingLeft:6},e.createElement(D.Typography,{variant:"sigma",textColor:"neutral500"},s)),o.map(i=>i.isActionRelatedToCurrentProperty?e.createElement(Ht,{justifyContent:"center",key:i.label},e.createElement(D.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):e.createElement(Ht,{key:i.label})))};Xt.propTypes={headers:r().arrayOf(r().shape({label:r().string.isRequired,isActionRelatedToCurrentProperty:r().bool.isRequired})).isRequired,label:r().string.isRequired};const Kn=Xt,hn=S.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`,Yt=()=>e.createElement(hn,null,"*");var Xn=Object.defineProperty,yn=Object.defineProperties,Yn=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,qt=(o,t,n)=>t in o?Xn(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,ye=(o,t)=>{for(var n in t||(t={}))Jt.call(t,n)&&qt(o,n,t[n]);if(Qt)for(var n of Qt(t))nt.call(t,n)&&qt(o,n,t[n]);return o},_t=(o,t)=>yn(o,Yn(t));const vn=(o,t)=>o.map(n=>{const s=Array.isArray(n.subjects)&&n.subjects.indexOf(t)!==-1;return _t(ye({},n),{isDisplayed:s})});var Cn=a(87462),En=Object.defineProperty,en=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,tn=(o,t,n)=>t in o?En(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Pn=(o,t)=>{for(var n in t||(t={}))gt.call(t,n)&&tn(o,n,t[n]);if(en)for(var n of en(t))bn.call(t,n)&&tn(o,n,t[n]);return o};const nn=(0,S.default)(F.Box)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,Sn=S.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:t})=>o.colors[t]};
  }
`,Mt=o=>e.createElement(nn,null,e.createElement(Sn,Pn({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));Mt.defaultProps={fill:"primary200"},Mt.propTypes={fill:r().string};const on=(0,e.memo)(Mt);var Lt=function(){return window&&window.strapi&&window.strapi.isEE?a(76766).Z:a(28472).Z}(),It=(0,S.default)(z.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],le),an=(0,S.default)(z.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],ke),Tn=(0,S.default)(F.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),sn=(0,S.default)(F.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(o){var t=o.isVisible,n=o.theme;return t?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),An=(0,S.default)(z.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(o){var t=o.theme;return t.spaces[4]},function(o){var t=o.level;return 145-t*36},function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(pt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(mt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&mt(n)}),p=S.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(o){var t=o.theme;return t.spaces[2]},function(o){var t=o.theme;return t.spaces[2]},4/16,function(o){var t=o.theme;return t.colors.primary200}),c=function o(t){var n=t.childrenForm,s=t.isFormDisabled,i=t.recursiveLevel,d=t.pathToDataFromActionRow,m=t.propertyActions,g=t.parentName,E=t.propertyName,b=(0,Y.useIntl)(),P=b.formatMessage,L=(0,J.$_)(),$=L.modifiedData,ee=L.onChangeParentCheckbox,w=L.onChangeSimpleCheckbox,j=(0,e.useState)(null),T=(0,U.Z)(j,2),I=T[0],X=T[1],se=function(Re){X(function(Be){return Be===Re?null:Re})},Oe=(0,e.useMemo)(function(){return I?n.find(function(ve){var Re=ve.value;return Re===I}):null},[I,n]);return e.createElement(Tn,null,e.createElement(p,null),n.map(function(ve,Re){var Be=ve.label,Me=ve.value,ht=ve.required,Ce=ve.children,we=Re+1<n.length,ce=Array.isArray(Ce),Ae=I===Me;return e.createElement(sn,{key:Me,isVisible:we},e.createElement(an,null,e.createElement(on,{color:"primary200"}),e.createElement(z.Flex,{style:{flex:1}},e.createElement(An,{level:i,isActive:Ae,isCollapsable:ce},e.createElement(Tt,(0,Cn.Z)({alignItems:"center",isCollapsable:ce},ce&&{onClick:function(){return se(Me)},"aria-expanded":Ae,onKeyDown:function(je){var We=je.key;return(We==="Enter"||We===" ")&&se(Me)},tabIndex:0,role:"button"},{title:Be}),e.createElement(D.Typography,{ellipsis:!0},W()(Be)),ht&&e.createElement(Yt,null),e.createElement(pt,{$isActive:Ae}))),e.createElement(z.Flex,{style:{flex:1}},m.map(function(De){var je=De.actionId,We=De.label,ut=De.isActionRelatedToCurrentProperty;if(!ut)return e.createElement(St,{key:je});var Ve=[].concat((0,oe.Z)(d.split("..")),[je,"properties",E],(0,oe.Z)(g.split("..")),[Me]),ct=ue()($,Ve,!1);if(!Ce)return e.createElement(It,{key:We,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{disabled:s||Lt,name:Ve.join(".."),"aria-label":P({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Be," ").concat(We)}),onValueChange:function(Ft){w({target:{name:Ve.join(".."),value:Ft}})},value:ct}));var bt=rt(ct),Pt=bt.hasAllActionsSelected,yt=bt.hasSomeActionsSelected;return e.createElement(It,{key:We,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{key:We,disabled:s||Lt,name:Ve.join(".."),"aria-label":P({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Be," ").concat(We)}),onValueChange:function(Ft){ee({target:{name:Ve.join(".."),value:Ft}})},value:Pt,indeterminate:yt}))})))),Oe&&Ae&&e.createElement(F.Box,{paddingBottom:2},e.createElement(o,{isFormDisabled:s,parentName:"".concat(g,"..").concat(Me),pathToDataFromActionRow:d,propertyActions:m,propertyName:E,recursiveLevel:i+1,childrenForm:Oe.children})))}))};c.propTypes={childrenForm:r().array.isRequired,isFormDisabled:r().bool.isRequired,parentName:r().string.isRequired,pathToDataFromActionRow:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,recursiveLevel:r().number.isRequired};const l=(0,e.memo)(c),h=o=>o.reduce((n,s)=>(s.isActionRelatedToCurrentProperty&&n.push(s.actionId),n),[]),A=(o,t,n,s,i)=>{const m=h(o).reduce((g,E)=>{const b=[...n.split(".."),E,"properties",s,i],P=(0,f.get)(t,b,!1);return g[E]=P,g},{});return rt(m)};var M=function(){return window&&window.strapi&&window.strapi.isEE?a(74512).Z:a(35820).Z}(),O=(0,S.default)(z.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],le),v=(0,S.default)(z.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],ke,function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(pt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(mt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&mt(n)}),R=function(t){var n=t.childrenForm,s=t.label,i=t.isFormDisabled,d=t.name,m=t.required,g=t.pathToData,E=t.propertyActions,b=t.propertyName,P=t.isOdd,L=(0,Y.useIntl)(),$=L.formatMessage,ee=(0,e.useState)(null),w=(0,U.Z)(ee,2),j=w[0],T=w[1],I=(0,J.$_)(),X=I.modifiedData,se=I.onChangeCollectionTypeLeftActionRowCheckbox,Oe=I.onChangeParentCheckbox,ve=I.onChangeSimpleCheckbox,Re=j===d,Be=(0,e.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),Me=Be.length>0,ht=(0,e.useCallback)(function(){Me&&T(function(De){return De===d?null:d})},[Me,d]),Ce=function(je){var We=je.target.value;se(g,b,d,We)},we=(0,e.useMemo)(function(){return A(E,X,g,b,d)},[E,X,g,b,d]),ce=we.hasAllActionsSelected,Ae=we.hasSomeActionsSelected;return e.createElement(e.Fragment,null,e.createElement(v,{alignItems:"center",isCollapsable:Me,isActive:Re,background:P?"neutral100":"neutral0"},e.createElement(z.Flex,null,e.createElement(Et,{onChange:Ce,onClick:ht,isCollapsable:Me,isFormDisabled:i,label:s,someChecked:Ae,value:ce,isActive:Re},m&&e.createElement(Yt,null),e.createElement(pt,{$isActive:Re})),e.createElement(z.Flex,null,E.map(function(De){var je=De.label,We=De.isActionRelatedToCurrentProperty,ut=De.actionId;if(!We)return e.createElement(St,{key:je});var Ve=[].concat((0,oe.Z)(g.split("..")),[ut,"properties",b,d]);if(!Me){var ct=ue()(X,Ve,!1);return e.createElement(O,{key:ut,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{disabled:i||M,name:Ve.join(".."),"aria-label":$({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(je)}),onValueChange:function(Nn){ve({target:{name:Ve.join(".."),value:Nn}})},value:ct}))}var bt=ue()(X,Ve,{}),Pt=rt(bt),yt=Pt.hasAllActionsSelected,jn=Pt.hasSomeActionsSelected;return e.createElement(O,{key:je,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{disabled:i||M,name:Ve.join(".."),onValueChange:function(Nn){Oe({target:{name:Ve.join(".."),value:Nn}})},"aria-label":$({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(je)}),value:yt,indeterminate:jn}))})))),Re&&e.createElement(l,{childrenForm:Be,isFormDisabled:i,parentName:d,pathToDataFromActionRow:g,propertyName:b,propertyActions:E,recursiveLevel:0}))};R.defaultProps={childrenForm:[],required:!1},R.propTypes={childrenForm:r().array,label:r().string.isRequired,isFormDisabled:r().bool.isRequired,name:r().string.isRequired,pathToData:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,required:r().bool,isOdd:r().bool.isRequired};const Te=(0,e.memo)(R),ge=S.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,Xe=({availableActions:o,childrenForm:t,isFormDisabled:n,label:s,pathToData:i,propertyName:d})=>{const m=(0,e.useMemo)(()=>zn(o,d),[o,d]);return e.createElement(ge,null,e.createElement(Kn,{label:s,headers:m}),e.createElement(F.Box,null,t.map(({children:g,label:E,value:b,required:P},L)=>e.createElement(Te,{childrenForm:g,key:b,label:E,isFormDisabled:n,name:b,required:P,propertyActions:m,pathToData:i,propertyName:d,isOdd:L%2===0}))))};Xe.propTypes={childrenForm:r().array.isRequired,availableActions:r().array.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,pathToData:r().string.isRequired,propertyName:r().string.isRequired};const ft=Xe,it=S.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:t})=>t&&`border: 1px solid ${o.colors.primary600};`}
`,tt=({allActions:o,contentTypeName:t,label:n,index:s,isActive:i,isFormDisabled:d,onClickToggleCollapse:m,pathToData:g,properties:E})=>{const b=(0,e.useCallback)(()=>{m(t)},[t,m]),P=(0,e.useMemo)(()=>vn(o,t),[o,t]);return e.createElement(it,{isActive:i},e.createElement(gn,{availableActions:P,isActive:i,isGrey:s%2===0,isFormDisabled:d,label:n,onClickToggle:b,pathToData:g}),i&&E.map(({label:L,value:$,children:ee})=>e.createElement(ft,{availableActions:P,childrenForm:ee,isFormDisabled:d,label:L,pathToData:g,propertyName:$,key:$})))};tt.propTypes={allActions:r().array.isRequired,contentTypeName:r().string.isRequired,index:r().number.isRequired,isActive:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggleCollapse:r().func.isRequired,pathToData:r().string.isRequired,properties:r().array.isRequired};const lt=tt,On=({actions:o,isFormDisabled:t,pathToData:n,subjects:s})=>{const[i,d]=(0,e.useState)(null),m=g=>{d(i===g?null:g)};return s.map(({uid:g,label:E,properties:b},P)=>e.createElement(lt,{allActions:o,key:g,contentTypeName:g,label:E,isActive:i===g,isFormDisabled:t,index:P,onClickToggleCollapse:m,pathToData:`${n}..${g}`,properties:b}))};On.defaultProps={actions:[],subjects:[]},On.propTypes={actions:r().array.isRequired,isFormDisabled:r().bool.isRequired,pathToData:r().string.isRequired,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))};const No=(0,e.memo)(On),Wo=o=>o.filter(({subjects:t})=>t&&t.length);var $o=Object.defineProperty,Jn=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,qn=(o,t,n)=>t in o?$o(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,_n=(o,t)=>{for(var n in t||(t={}))Uo.call(t,n)&&qn(o,n,t[n]);if(Jn)for(var n of Jn(t))ko.call(t,n)&&qn(o,n,t[n]);return o};const Zo=o=>o.map(({actionId:t})=>t),Vo=(o,t)=>o.reduce((n,s)=>(Object.keys(t).forEach(i=>{const d=(0,f.get)(t,[i,s],{}),m={[i]:Rt(d)};n[s]?n[s]=_n(_n({},n[s]),m):n[s]=m}),n),{}),Go=(o,t)=>{const n=Zo(o),s=Vo(n,t);return Object.keys(s).reduce((d,m)=>(d[m]=rt(s[m]),d),{})};var zo=function(){return window&&window.strapi&&window.strapi.isEE?a(85822).Z:a(99047).Z}(),Ko=(0,S.default)(Je.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],le),Rn=function(t){var n=t.actions,s=t.isFormDisabled,i=t.kind,d=(0,Y.useIntl)(),m=d.formatMessage,g=(0,J.$_)(),E=g.modifiedData,b=g.onChangeCollectionTypeGlobalActionCheckbox,P=(0,e.useMemo)(function(){return Wo(n)},[n]),L=(0,e.useMemo)(function(){return Go(P,E[i])},[E,P,i]);return e.createElement(F.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:xe}},e.createElement(Je.Stack,{horizontal:!0,spacing:0},P.map(function($){var ee=$.label,w=$.actionId;return e.createElement(Ko,{key:w,spacing:3},e.createElement(D.Typography,{variant:"sigma",textColor:"neutral500"},m({id:"Settings.roles.form.permissions.".concat(ee.toLowerCase()),defaultMessage:ee})),e.createElement(be.BaseCheckbox,{disabled:s||zo,onValueChange:function(T){b(i,w,T)},name:w,"aria-label":m({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:m({id:"Settings.roles.form.permissions.".concat(ee.toLowerCase()),defaultMessage:ee})}),value:ue()(L,[w,"hasAllActionsSelected"],!1),indeterminate:ue()(L,[w,"hasSomeActionsSelected"],!1)}))})))};Rn.defaultProps={actions:[]},Rn.propTypes={actions:r().arrayOf(r().shape({label:r().string.isRequired,actionId:r().string.isRequired,subjects:r().array.isRequired})),isFormDisabled:r().bool.isRequired,kind:r().string.isRequired};const Ho=(0,e.memo)(Rn),Xo=(0,S.default)(F.Box)`
  overflow-x: auto;
`,eo=({isFormDisabled:o,kind:t,layout:{actions:n,subjects:s}})=>{const i=de()([...s],"label");return e.createElement(Xo,{background:"neutral0"},e.createElement(Ho,{actions:n,kind:t,isFormDisabled:o}),e.createElement(No,{actions:n,isFormDisabled:o,pathToData:t,subjects:i}))};eo.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().shape({actions:r().array,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))}).isRequired};const to=(0,e.memo)(eo);var Yo=a(47713);const no=({children:o,value:t})=>e.createElement(Yo.$l.Provider,{value:t},o);no.propTypes={children:r().node.isRequired,value:r().exact({availableConditions:r().array.isRequired,modifiedData:r().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:r().func.isRequired,onChangeConditions:r().func.isRequired,onChangeSimpleCheckbox:r().func.isRequired,onChangeParentCheckbox:r().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:r().func.isRequired}).isRequired};const Qo=no;var Dn=a(96654),oo=a(34626),ao=a(81325),Jo=Object.defineProperty,qo=Object.defineProperties,_o=Object.getOwnPropertyDescriptors,so=Object.getOwnPropertySymbols,ea=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable,ro=(o,t,n)=>t in o?Jo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,na=(o,t)=>{for(var n in t||(t={}))ea.call(t,n)&&ro(o,n,t[n]);if(so)for(var n of so(t))ta.call(t,n)&&ro(o,n,t[n]);return o},oa=(o,t)=>qo(o,_o(t));const aa=(o,t,n)=>o.map(s=>{const i=[...n,s.action,"properties","enabled"],d=(0,f.get)(t,i,!1),m=(0,f.get)(t,[...n,s.action,"conditions"],{}),g=dt(m).some(E=>E);return oa(na({},s),{isDisplayed:d,checkboxName:i.join(".."),hasSomeActionsSelected:d,value:d,hasConditions:g,label:s.displayName,actionId:s.action,pathToConditionsObject:[...n,s.action]})}),sa=o=>{const t=Object.entries(o).reduce((s,i)=>{const[d,{conditions:m}]=i;return s[d]=m,s},{});return dt(t).some(s=>s)};var xn=function(){return window&&window.strapi&&window.strapi.isEE?a(8629).Z:a(34341).Z}(),ra=S.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(o){var t=o.theme;return t.colors.neutral150}),ia=S.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(o){var t=o.hasConditions,n=o.disabled,s=o.theme;return t&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?s.colors.neutral100:s.colors.primary600,`;
    }
  `)}),io=function(t){var n=t.categoryName,s=t.isFormDisabled,i=t.subCategoryName,d=t.actions,m=t.pathToData,g=(0,e.useState)(!1),E=(0,U.Z)(g,2),b=E[0],P=E[1],L=(0,J.$_)(),$=L.modifiedData,ee=L.onChangeParentCheckbox,w=L.onChangeSimpleCheckbox,j=(0,Y.useIntl)(),T=j.formatMessage,I=ue()($,m,{}),X=(0,e.useMemo)(function(){return Object.keys(I).reduce(function(Ce,we){return Ce[we]=Rt(I[we]),Ce},{})},[I]),se=rt(X),Oe=se.hasAllActionsSelected,ve=se.hasSomeActionsSelected,Re=function(){P(function(we){return!we})},Be=function(){P(!1)},Me=aa(d,$,m),ht=sa(ue()($,(0,oe.Z)(m),{}));return e.createElement(e.Fragment,null,e.createElement(F.Box,null,e.createElement(z.Flex,{justifyContent:"space-between",alignItems:"center"},e.createElement(F.Box,{paddingRight:4},e.createElement(D.Typography,{variant:"sigma",textColor:"neutral600"},i)),e.createElement(ra,null),e.createElement(F.Box,{paddingLeft:4},e.createElement(ao.Checkbox,{name:m.join(".."),disabled:s||xn,onValueChange:function(we){ee({target:{name:m.join(".."),value:we}})},indeterminate:ve,value:Oe},T({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(z.Flex,{paddingTop:6,paddingBottom:6},e.createElement(oo.Grid,{gap:2,style:{flex:1}},Me.map(function(Ce){var we=Ce.checkboxName,ce=Ce.value,Ae=Ce.action,De=Ce.displayName,je=Ce.hasConditions;return e.createElement(oo.GridItem,{col:3,key:Ae},e.createElement(ia,{disabled:s||xn,hasConditions:je},e.createElement(ao.Checkbox,{name:we,disabled:s||xn,onValueChange:function(ut){w({target:{name:we,value:ut}})},value:ce},De)))})),e.createElement(Pe,{hasConditions:ht,onClick:Re}))),b&&e.createElement(jt,{headerBreadCrumbs:[n,i],actions:Me,isFormDisabled:s,onClosed:Be,onToggle:Re}))};io.propTypes={actions:r().array.isRequired,categoryName:r().string.isRequired,isFormDisabled:r().bool.isRequired,subCategoryName:r().string.isRequired,pathToData:r().array.isRequired};const la=io,Mn=({childrenForm:o,kind:t,name:n,isOpen:s,isFormDisabled:i,isWhite:d,onOpenCategory:m,pathToData:g})=>{const{formatMessage:E}=(0,Y.useIntl)(),b=()=>{m(n)},P=(0,e.useMemo)(()=>n.split("::").pop(),[n]);return e.createElement(Dn.Accordion,{expanded:s,onToggle:b,id:`accordion-${n}`,variant:d?"primary":"secondary"},e.createElement(Dn.AccordionToggle,{title:W()(P),description:`${E({id:"Settings.permissions.category"},{category:P})} ${t==="plugins"?"plugin":t}`}),e.createElement(Dn.AccordionContent,null,e.createElement(F.Box,{padding:6},o.map(({actions:L,subCategoryName:$,subCategoryId:ee})=>e.createElement(la,{key:$,actions:L,categoryName:P,isFormDisabled:i,subCategoryName:$,pathToData:[...g,ee]})))))};Mn.defaultProps={},Mn.propTypes={childrenForm:r().array.isRequired,isOpen:r().bool.isRequired,isFormDisabled:r().bool.isRequired,isWhite:r().bool.isRequired,kind:r().string.isRequired,name:r().string.isRequired,onOpenCategory:r().func.isRequired,pathToData:r().array.isRequired};const ca=Mn,lo=({isFormDisabled:o,kind:t,layout:n})=>{const[s,i]=(0,e.useState)(null),d=m=>{i(m===s?null:m)};return e.createElement(F.Box,{padding:6,background:"neutral0"},n.map(({category:m,categoryId:g,childrenForm:E},b)=>e.createElement(ca,{key:m,childrenForm:E,kind:t,isFormDisabled:o,isOpen:s===m,isWhite:b%2===1,name:m,onOpenCategory:d,pathToData:[t,g]})))};lo.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().arrayOf(r().shape({category:r().string.isRequired,categoryId:r().string.isRequired,childrenForm:r().arrayOf(r().shape({actions:r().array.isRequired})).isRequired}).isRequired).isRequired};const co=lo,uo=(o,t,n)=>o.find(s=>s.action===t&&s.subject===n);var da=Object.defineProperty,ua=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,po=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,mo=(o,t,n)=>t in o?da(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,go=(o,t)=>{for(var n in t||(t={}))ma.call(t,n)&&mo(o,n,t[n]);if(po)for(var n of po(t))ga.call(t,n)&&mo(o,n,t[n]);return o},fo=(o,t)=>ua(o,pa(t));const ho=(o,t=[])=>o.reduce((n,s)=>(n[s.id]=t.indexOf(s.id)!==-1,n),{}),yo=({children:o},t,n="")=>o.reduce((s,i)=>{if(i.children)return fo(go({},s),{[i.value]:yo(i,t,`${n}${i.value}.`)});const d=t.indexOf(`${n}${i.value}`)!==-1;return s[i.value]=d,s},{}),fa=(o,t,n)=>o.reduce((s,i)=>{const d=t.properties.find(({value:m})=>m===i);if(d){const m=(0,f.get)(n,["properties",d.value],[]),g=yo(d,m);s.properties[i]=g}return s},{properties:{}}),ha=(o,t)=>t.reduce((n,s)=>{const i=o.find(({uid:d})=>d===s)||null;return i&&(n[s]=i),n},{}),vo=({subjects:o},t,n,s=[])=>t.reduce((i,d)=>{const m=d.subjects,g=ha(o,m);if((0,f.isEmpty)(g))return i;const E=Object.keys(g).reduce((b,P)=>{const{actionId:L,applyToProperties:$}=d,j=g[P].properties.map(({value:se})=>se).every(se=>($||[]).indexOf(se)===-1),T=uo(s,L,P),I=ho(n,(0,f.get)(T,"conditions",[]));if((0,f.isEmpty)($)||j)return(0,f.set)(b,[P,L],{properties:{enabled:T!==void 0},conditions:I}),b;const X=fa($,g[P],T);return(0,f.set)(b,[P,L],fo(go({},X),{conditions:I})),b},{});return(0,f.merge)(i,E)},{}),ya=(o,t,n)=>o.reduce((s,i)=>{const d=uo(n,i.action,null);return s[i.action]={properties:{enabled:d!==void 0},conditions:ho(t,(0,f.get)(d,"conditions",[]))},s},{}),va=(o,t,n)=>o.reduce((s,i)=>(s[i.subCategoryId]=ya(i.actions,t,n),s),{}),Co=(o,t,n=[])=>o.reduce((s,{categoryId:i,childrenForm:d})=>{const m=va(d,t,n);return s[i]=m,s},{}),Eo=o=>o.split(" ").join("-"),bo=(o,t)=>(0,f.chain)(o).groupBy(t).map((n,s)=>({category:s,categoryId:Eo(s),childrenForm:(0,f.chain)(n).groupBy("subCategory").map((i,d)=>({subCategoryName:d,subCategoryId:Eo(d),actions:i})).value()})).value(),Ca=(o,t)=>{const{conditions:n,sections:{collectionTypes:s,singleTypes:i,plugins:d,settings:m}}=o,g={collectionTypes:s,singleTypes:i,plugins:bo(d,"plugin"),settings:bo(m,"category")},E={collectionTypes:vo(s,s.actions||[],n,t),singleTypes:vo(i,i.actions||[],n,t),plugins:Co(g.plugins,n,t),settings:Co(g.settings,n,t)};return{initialData:E,modifiedData:E,layouts:g}};var Ea=Object.defineProperty,ba=Object.defineProperties,Pa=Object.getOwnPropertyDescriptors,Po=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,So=(o,t,n)=>t in o?Ea(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Ln=(o,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&So(o,n,t[n]);if(Po)for(var n of Po(t))Ta.call(t,n)&&So(o,n,t[n]);return o},In=(o,t)=>ba(o,Pa(t));const To=o=>Object.keys(o).reduce((t,n)=>{const s=o[n];if((0,f.isObject)(s)&&!(0,f.has)(s,"conditions"))return In(Ln({},t),{[n]:To(s)});if((0,f.isObject)(s)&&(0,f.has)(s,"conditions")&&!dt((0,f.omit)(s,"conditions")).some(d=>d)){const d=Object.keys(s.conditions).reduce((m,g)=>(m[g]=!1,m),{});return In(Ln({},t),{[n]:In(Ln({},s),{conditions:d})})}return t[n]=s,t},{}),Fn=To;var Aa=Object.defineProperty,Oa=Object.defineProperties,Ra=Object.getOwnPropertyDescriptors,Ao=Object.getOwnPropertySymbols,Da=Object.prototype.hasOwnProperty,xa=Object.prototype.propertyIsEnumerable,Oo=(o,t,n)=>t in o?Aa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Ma=(o,t)=>{for(var n in t||(t={}))Da.call(t,n)&&Oo(o,n,t[n]);if(Ao)for(var n of Ao(t))xa.call(t,n)&&Oo(o,n,t[n]);return o},La=(o,t)=>Oa(o,Ra(t));const Ro=(o,t)=>Object.keys(o).reduce((n,s)=>{const i=o[s];return s==="conditions"?(n[s]=i,n):(0,f.isObject)(i)?La(Ma({},n),{[s]:Ro(i,t)}):(n[s]=t,n)},{}),rn=Ro;var Ia=Object.defineProperty,Fa=Object.defineProperties,Ba=Object.getOwnPropertyDescriptors,Do=Object.getOwnPropertySymbols,wa=Object.prototype.hasOwnProperty,ja=Object.prototype.propertyIsEnumerable,xo=(o,t,n)=>t in o?Ia(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Na=(o,t)=>{for(var n in t||(t={}))wa.call(t,n)&&xo(o,n,t[n]);if(Do)for(var n of Do(t))ja.call(t,n)&&xo(o,n,t[n]);return o},Wa=(o,t)=>Fa(o,Ba(t));const $a={initialData:{},modifiedData:{},layouts:{}},Ua=(o,t)=>(0,k.default)(o,n=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:s,actionId:i,value:d}=t,m=["modifiedData",s];Object.keys((0,f.get)(o,m)).forEach(g=>{const E=(0,f.get)(o,[...m,g,i],void 0);if(E){let b=rn(E,d);if(!d&&b.conditions){const P=rn(b.conditions,!1);b=Wa(Na({},b),{conditions:P})}(0,f.set)(n,[...m,g,i],b)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:s,propertyName:i,rowName:d,value:m}=t;let g=(0,f.cloneDeep)(o.modifiedData);const E=s.split(".."),b=(0,f.get)(g,E,{});Object.keys(b).forEach(P=>{if((0,f.has)(b[P],`properties.${i}`)){const L=(0,f.get)(b,[P,"properties",i,d]),$=[...E,P,"properties",i,d];if(!(0,f.isObject)(L))(0,f.set)(g,$,m);else{const ee=rn(L,m);(0,f.set)(g,$,ee)}}}),m||(g=Fn(g)),(0,f.set)(n,"modifiedData",g);break}case"ON_CHANGE_CONDITIONS":{Object.entries(t.conditions).forEach(s=>{const[i,d]=s;(0,f.set)(n,["modifiedData",...i.split(".."),"conditions"],d)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let s=(0,f.cloneDeep)(o.modifiedData);(0,f.set)(s,[...t.keys.split("..")],t.value),t.value||(s=Fn(s)),(0,f.set)(n,"modifiedData",s);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:s,value:i}=t,d=[...s.split("..")];let m=(0,f.cloneDeep)(o.modifiedData);const g=(0,f.get)(m,d,{}),E=rn(g,i);(0,f.set)(m,d,E),i||(m=Fn(m)),(0,f.set)(n,["modifiedData"],m);break}case"RESET_FORM":{n.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=o.modifiedData;break}default:return n}}),Bn=o=>Object.entries(o).filter(([,t])=>t).map(([t])=>t),ka=o=>{const[t,{conditions:n}]=o;return{action:t,subject:null,conditions:Bn(n),properties:{}}},Za=o=>Object.values(o).reduce((t,n)=>{const s=Object.entries(n).reduce((i,d)=>{const[,{properties:{enabled:m}}]=d;if(!m)return i;const g=ka(d);return i.push(g),i},[]);return[...t,...s]},[]),Mo=o=>Object.values(o).reduce((t,n)=>{const s=Za(n);return[...t,...s]},[]),Lo=(o,t="")=>Object.entries(o).reduce((n,s)=>{const[i,d]=s;return(0,f.isObject)(d)?[...n,...Lo(d,`${t}${i}.`)]:(d&&!(0,f.isObject)(d)&&n.push(`${t}${i}`),n)},[]),Va=(o,t,{conditions:n,properties:s})=>Object.entries(s).reduce((i,d)=>{const[m,g]=d;return i.properties[m]=Lo(g),i},{action:o,subject:t,conditions:Bn(n),properties:{}}),Ga=(o,t,{conditions:n})=>({action:o,subject:t,properties:{},conditions:Bn(n)}),za=(o,t)=>Object.entries(t).reduce((s,i)=>{const[d,m]=i;if(!dt(m).some(b=>b))return s;if(!(0,f.has)(m,"properties.enabled")){const b=Va(d,o,m);return[...s,b]}if(!m.properties.enabled)return s;const E=Ga(d,o,m);return s.push(E),s},[]),Io=o=>Object.entries(o).reduce((n,s)=>{const[i,d]=s,m=za(i,d);return[...n,...m]},[]),Ka=o=>{const t=Mo(o.plugins),n=Mo(o.settings),s=Io(o.collectionTypes),i=Io(o.singleTypes);return[...t,...n,...s,...i]},Ha=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var Xa=Object.defineProperty,Fo=Object.getOwnPropertySymbols,Ya=Object.prototype.hasOwnProperty,Qa=Object.prototype.propertyIsEnumerable,Bo=(o,t,n)=>t in o?Xa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,wo=(o,t)=>{for(var n in t||(t={}))Ya.call(t,n)&&Bo(o,n,t[n]);if(Fo)for(var n of Fo(t))Qa.call(t,n)&&Bo(o,n,t[n]);return o};const wn=(0,e.forwardRef)(({layout:o,isFormDisabled:t,permissions:n},s)=>{const[{initialData:i,layouts:d,modifiedData:m},g]=(0,e.useReducer)(Ua,$a,()=>Ca(o,n)),{formatMessage:E}=(0,Y.useIntl)();(0,e.useImperativeHandle)(s,()=>({getPermissions(){const w=(0,ne.difference)(i.collectionTypes,m.collectionTypes),j=(0,ne.difference)(i.singleTypes,m.singleTypes),T=wo(wo({},w),j);let I;return Ne()(T)?I=!1:I=Object.values(T).some(X=>Object.values(X).some(se=>Ee()(se,"conditions"))),{permissionsToSend:Ka(m),didUpdateConditions:I}},resetForm(){g({type:"RESET_FORM"})},setFormAfterSubmit(){g({type:"SET_FORM_AFTER_SUBMIT"})}}));const b=(w,j,T,I)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:w,propertyName:j,rowName:T,value:I})},P=(w,j,T)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:w,actionId:j,value:T})},L=w=>{g({type:"ON_CHANGE_CONDITIONS",conditions:w})},$=(0,e.useCallback)(({target:{name:w,value:j}})=>{g({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:w,value:j})},[]),ee=(0,e.useCallback)(({target:{name:w,value:j}})=>{g({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:w,value:j})},[]);return e.createElement(Qo,{value:{availableConditions:o.conditions,modifiedData:m,onChangeConditions:L,onChangeSimpleCheckbox:$,onChangeParentCheckbox:ee,onChangeCollectionTypeLeftActionRowCheckbox:b,onChangeCollectionTypeGlobalActionCheckbox:P}},e.createElement(Z.TabGroup,{id:"tabs",label:E({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement(Z.Tabs,null,Ha.map(w=>e.createElement(Z.Tab,{key:w.id},E({id:w.labelId,defaultMessage:w.defaultMessage})))),e.createElement(Z.TabPanels,{style:{position:"relative"}},e.createElement(Z.TabPanel,null,e.createElement(to,{layout:d.collectionTypes,kind:"collectionTypes",isFormDisabled:t})),e.createElement(Z.TabPanel,null,e.createElement(to,{layout:d.singleTypes,kind:"singleTypes",isFormDisabled:t})),e.createElement(Z.TabPanel,null,e.createElement(co,{layout:d.plugins,kind:"plugins",isFormDisabled:t})),e.createElement(Z.TabPanel,null,e.createElement(co,{layout:d.settings,kind:"settings",isFormDisabled:t})))))});wn.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},wn.propTypes={layout:r().object,isFormDisabled:r().bool.isRequired,permissions:r().array};const Ja=(0,e.memo)(wn)},34341:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!0},67500:(me,x,a)=>{a.d(x,{Z:()=>e});const e=()=>"todo empty role"},52351:(me,x,a)=>{a.d(x,{Z:()=>Ke});var e=a(67294),C=a(45697),r=a.n(C),ne=a(5493),Z=a.n(ne),Le=a(67826),Ee=a.n(Le),fe=a(41798),Ne=a.n(fe),Y=a(49425),F=a.n(Y),S=a(30741),V=a.n(S),de=a(68547),U=a.n(de),te=a(97132),Ge=Object.defineProperty,$e=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,z=(re,J,ae)=>J in re?Ge(re,J,{enumerable:!0,configurable:!0,writable:!0,value:ae}):re[J]=ae,y=(re,J)=>{for(var ae in J||(J={}))ze.call(J,ae)&&z(re,ae,J[ae]);if($e)for(var ae of $e(J))be.call(J,ae)&&z(re,ae,J[ae]);return re};const ue=({id:re,name:J,description:ae,usersCount:at,icons:Ie})=>{const{formatMessage:Ye}=(0,te.useIntl)(),Qe=Ye({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:at});return e.createElement(fe.Tr,y({key:re},(0,de.onRowClick)({fn:Ie[1].onClick})),e.createElement(fe.Td,{maxWidth:(0,de.pxToRem)(130)},e.createElement(Y.Typography,{ellipsis:!0,textColor:"neutral800"},J)),e.createElement(fe.Td,{maxWidth:(0,de.pxToRem)(250)},e.createElement(Y.Typography,{ellipsis:!0,textColor:"neutral800"},ae)),e.createElement(fe.Td,null,e.createElement(Y.Typography,{textColor:"neutral800"},Qe)),e.createElement(fe.Td,null,e.createElement(Le.Flex,y({justifyContent:"flex-end"},de.stopPropagation),Ie.map((Pe,Ue)=>Pe?e.createElement(ne.Box,{key:Pe.label,paddingLeft:Ue===0?0:1},e.createElement(S.IconButton,{onClick:Pe.onClick,label:Pe.label,noBorder:!0,icon:Pe.icon})):null))))};ue.propTypes={id:r().number.isRequired,name:r().string.isRequired,description:r().string.isRequired,usersCount:r().number.isRequired,icons:r().array.isRequired};const Ke=ue},85302:(me,x,a)=>{a.d(x,{Z:()=>_e});var e=a(67294),C=a(68547),r=a(87751),ne=a(63852),Z=a(80768),Le=a.n(Z),Ee=a(18568),fe=a.n(Ee),Ne=a(19352),Y=a.n(Ne),F=a(67483),S=a.n(F),V=a(19408),de=a(78862),U=a(41798),te=a(49425),Ge=a(62031),$e=a(26851),ze=a(97132),be=a(49656),z=a(52351),y=a(67500),ue=a(45697),Ke=a.n(ue),re=a(78384),J=a(59471),ae=a(24824),at=a(30741),Ie=a(13260),Ye=a(5493),Qe=a(67826),Pe=a(9008),Ue=a(43257),Je=a.n(Ue),ie=a(84040),qe=a.n(ie);const D=a.p+"c3de6118ef47086ad05c.png",k=a.p+"bd81ba6c07827282255d.png",N=re.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:B})=>(0,C.setHexOpacity)(B.colors.neutral800,.2)};
  padding: 0 ${({theme:B})=>B.spaces[8]};
`,_=(0,re.default)(Qe.Flex)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,pe=(0,re.default)(Pe.Stack)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,W=(0,re.default)(Ye.Box)`
  position: absolute;
  right: ${({theme:B})=>B.spaces[4]};
  top: ${({theme:B})=>B.spaces[4]};
`,Q=({onClose:B,isOpen:K})=>{(0,C.useLockScroll)(K);const{formatMessage:H}=(0,ze.useIntl)();return K?e.createElement(J.Portal,null,e.createElement(N,{onClick:B},e.createElement(ae.FocusTrap,{onEscape:B},e.createElement(_,{onClick:f=>f.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:D,alt:"air-balloon"}),e.createElement(W,null,e.createElement(at.IconButton,{onClick:B,"aria-label":"Close",icon:e.createElement(qe(),null)})),e.createElement(pe,{spacing:6},e.createElement(te.Typography,{fontWeight:"bold",textColor:"primary600"},H({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement(Pe.Stack,{spacing:2},e.createElement(te.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},H({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(te.Typography,null,H({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(Ie.LinkButton,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(Je(),null)},H({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:k,alt:"upgrade-arrow"}))))):null};Q.propTypes={onClose:Ke().func.isRequired,isOpen:Ke().bool.isRequired};const oe=Q;var G=a(78143);const le=()=>{const{roles:B,isLoading:K}=(0,G.bF)(),H=(0,C.useQuery)(),f=decodeURIComponent(H.get("_q")||""),Fe=(0,ne.ZP)(B,f,{keys:["name","description"]});return{isLoading:K,sortedRoles:Fe}},xe=()=>{const{formatMessage:B}=(0,ze.useIntl)(),[K,H]=(0,e.useState)(!1),{trackUsage:f}=(0,C.useTracking)(),{push:Fe}=(0,be.useHistory)(),et=(0,e.useCallback)(Se=>{Fe(`/settings/roles/${Se}`)},[Fe]),He=(0,e.useCallback)(()=>{H(Se=>!Se)},[]),q=(0,e.useCallback)(()=>{f("didShowRBACUpgradeModal"),H(!0)},[f]),he=(0,e.useCallback)(Se=>[{onClick:He,label:B({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(S(),null)},{onClick:()=>et(Se.id),label:B({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(Y(),null)},{onClick:He,label:B({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(fe(),null)}],[B,He,et]);return{isModalOpen:K,handleToggleModalForCreatingRole:q,handleToggle:He,getIcons:he}},Ze=()=>{const{formatMessage:B}=(0,ze.useIntl)();(0,C.useFocusWhenNavigate)();const{sortedRoles:K,isLoading:H}=le(),{isModalOpen:f,handleToggle:Fe,handleToggleModalForCreatingRole:et,getIcons:He}=xe(),q=K.length+1,he=5;return e.createElement(Ge.Main,null,e.createElement(C.SettingsPageTitle,{name:"Roles"}),e.createElement(de.HeaderLayout,{primaryAction:e.createElement(V.Button,{onClick:et,startIcon:e.createElement(Le(),null),size:"S"},B({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:B({id:"global.roles",defaultMessage:"roles"}),subtitle:B({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(de.ContentLayout,null,e.createElement(U.Table,{colCount:he,rowCount:q,footer:e.createElement(U.TFooter,{onClick:et,icon:e.createElement(Le(),null)},B({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(U.Thead,null,e.createElement(U.Tr,null,e.createElement(U.Th,null,e.createElement(te.Typography,{variant:"sigma",textColor:"neutral600"},B({id:"global.name",defaultMessage:"Name"}))),e.createElement(U.Th,null,e.createElement(te.Typography,{variant:"sigma",textColor:"neutral600"},B({id:"global.description",defaultMessage:"Description"}))),e.createElement(U.Th,null,e.createElement(te.Typography,{variant:"sigma",textColor:"neutral600"},B({id:"global.users",defaultMessage:"Users"}))),e.createElement(U.Th,null,e.createElement($e.VisuallyHidden,null,B({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(U.Tbody,null,K==null?void 0:K.map(Se=>e.createElement(z.Z,{key:Se.id,id:Se.id,name:Se.name,description:Se.description,usersCount:Se.usersCount,icons:He(Se)})))),!q&&!H&&e.createElement(y.Z,null)),e.createElement(oe,{isOpen:f,onClose:Fe}))},_e=()=>e.createElement(C.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(Ze,null))},35301:(me,x,a)=>{a.d(x,{Z:()=>C});const C=[]},26789:(me,x,a)=>{a.d(x,{Z:()=>Je});var e=a(67294),C=a(47292),r=a(68547),ne=a(5493),Z=a(19408),Le=a(78862),Ee=a(34626),fe=a(62031),Ne=a(67826),Y=a(9008),F=a(49425),S=a(55967),V=a(59626),de=a(68717),U=a.n(de),te=a(80831),Ge=a(27361),$e=a.n(Ge),ze=a(41609),be=a.n(ze),z=a(97132),y=a(49656),ue=a(78384),Ke=a(21568),re=a(78143),J=a(87751),ae=a(53209);const Ie=ae.Ry().shape({name:ae.Z_().required(r.translatedErrors.required),description:ae.Z_().required(r.translatedErrors.required)});var Ye=a(25108),Qe=(ie,qe,D)=>new Promise((k,N)=>{var _=Q=>{try{W(D.next(Q))}catch(oe){N(oe)}},pe=Q=>{try{W(D.throw(Q))}catch(oe){N(oe)}},W=Q=>Q.done?k(Q.value):Promise.resolve(Q.value).then(_,pe);W((D=D.apply(ie,qe)).next())});const Pe=ue.default.div`
  border: 1px solid ${({theme:ie})=>ie.colors.primary200};
  background: ${({theme:ie})=>ie.colors.primary100};
  padding: ${({theme:ie})=>`${ie.spaces[2]} ${ie.spaces[4]}`};
  color: ${({theme:ie})=>ie.colors.primary600};
  border-radius: ${({theme:ie})=>ie.borderRadius};
  font-size: ${12/16}rem;
  font-weight: bold;
`,Ue=()=>{const ie=(0,r.useNotification)(),{lockApp:qe,unlockApp:D}=(0,r.useOverlayBlocker)(),{formatMessage:k}=(0,z.useIntl)(),[N,_]=(0,e.useState)(!1),{replace:pe}=(0,y.useHistory)(),W=(0,e.useRef)(),{trackUsage:Q}=(0,r.useTracking)(),oe=(0,y.useRouteMatch)("/settings/roles/duplicate/:id"),G=$e()(oe,"params.id",null),{isLoading:le,data:xe}=(0,re.U_)(),{permissions:ke,isLoading:Ze}=(0,re.Dq)(G),ot=B=>{qe(),_(!0),Q(G?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,r.request)("/admin/roles",{method:"POST",body:B})).then(K=>Qe(void 0,null,function*(){const{permissionsToSend:H}=W.current.getPermissions();return Q(G?"didDuplicateRole":"didCreateNewRole"),K.data.id&&!be()(H)&&(yield(0,r.request)(`/admin/roles/${K.data.id}/permissions`,{method:"PUT",body:{permissions:H}})),K})).then(K=>{_(!1),ie({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),pe(`/settings/roles/${K.data.id}`)}).catch(K=>{Ye.error(K),_(!1),ie({type:"warning",message:{id:"notification.error"}})}).finally(()=>{D()})},_e=`${k({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,C.format)(new Date,"PPP")}`;return e.createElement(fe.Main,null,e.createElement(r.SettingsPageTitle,{name:"Roles"}),e.createElement(te.Formik,{initialValues:{name:"",description:_e},onSubmit:ot,validationSchema:Ie,validateOnChange:!1},({handleSubmit:B,values:K,errors:H,handleReset:f,handleChange:Fe})=>e.createElement(r.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(Le.HeaderLayout,{primaryAction:e.createElement(Y.Stack,{horizontal:!0,spacing:2},e.createElement(Z.Button,{variant:"secondary",onClick:()=>{f(),W.current.resetForm()},size:"L"},k({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement(Z.Button,{onClick:B,loading:N,size:"L"},k({id:"global.save",defaultMessage:"Save"}))),title:k({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:k({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(r.Link,{startIcon:e.createElement(U(),null),to:"/settings/roles"},k({id:"global.back",defaultMessage:"Back"}))}),e.createElement(Le.ContentLayout,null,e.createElement(Y.Stack,{spacing:6},e.createElement(ne.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(Y.Stack,{spacing:4},e.createElement(Ne.Flex,{justifyContent:"space-between"},e.createElement(ne.Box,null,e.createElement(ne.Box,null,e.createElement(F.Typography,{fontWeight:"bold"},k({id:"global.details",defaultMessage:"Details"}))),e.createElement(ne.Box,null,e.createElement(F.Typography,{variant:"pi",textColor:"neutral600"},k({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement(Pe,null,k({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(Ee.Grid,{gap:4},e.createElement(Ee.GridItem,{col:6},e.createElement(S.TextInput,{name:"name",error:H.name&&k({id:H.name}),label:k({id:"global.name",defaultMessage:"Name"}),onChange:Fe,value:K.name})),e.createElement(Ee.GridItem,{col:6},e.createElement(V.Textarea,{label:k({id:"global.description",defaultMessage:"Description"}),name:"description",error:H.description&&k({id:H.description}),onChange:Fe},K.description))))),!le&&!Ze?e.createElement(ne.Box,{shadow:"filterShadow",hasRadius:!0},e.createElement(Ke.Z,{isFormDisabled:!1,ref:W,permissions:ke,layout:xe})):e.createElement(ne.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(r.LoadingIndicatorPage,null))))))))};function Je(){return e.createElement(r.CheckPagePermissions,{permissions:J.Z.settings.roles.create},e.createElement(Ue,null))}},53273:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!1},20591:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!1},74512:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!1},76766:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!1},85822:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!1},8629:(me,x,a)=>{a.d(x,{Z:()=>C});const C=!1},64527:(me,x,a)=>{a.d(x,{Z:()=>qe});var e=a(67294),C=a(68547),r=a(87751),ne=a(80768),Z=a.n(ne),Le=a(18568),Ee=a.n(Le),fe=a(67483),Ne=a.n(fe),Y=a(19352),F=a.n(Y),S=a(19408),V=a(78862),de=a(26851),U=a(62031),te=a(41798),Ge=a(49425),$e=a(96486),ze=a(63852),be=a(97132),z=a(49656),y=a(23998),ue=a(78143),Ke=a(67500),re=a(52351),J=a(73749);const ae={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},Ie=(D,k)=>(0,J.default)(D,N=>{switch(k.type){case"ON_REMOVE_ROLES":{N.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{N.shouldRefetchData=!0,N.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{N.shouldRefetchData=!1,N.roleToDelete=null,N.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{N.roleToDelete=k.id;break}default:return N}});var Ye=(D,k,N)=>new Promise((_,pe)=>{var W=G=>{try{oe(N.next(G))}catch(le){pe(le)}},Q=G=>{try{oe(N.throw(G))}catch(le){pe(le)}},oe=G=>G.done?_(G.value):Promise.resolve(G.value).then(W,Q);oe((N=N.apply(D,k)).next())});const Qe=()=>{(0,C.useFocusWhenNavigate)();const{isLoading:D,allowedActions:{canCreate:k,canDelete:N,canRead:_,canUpdate:pe}}=(0,C.useRBAC)(r.Z.settings.roles),{getData:W,roles:Q,isLoading:oe}=(0,ue.bF)(!1),[{query:G}]=(0,C.useQueryParams)(),le=(G==null?void 0:G._q)||"",xe=(0,ze.ZP)(Q,le,{keys:["name","description"]});return(0,e.useEffect)(()=>{!D&&_&&W()},[D,_,W]),{isLoadingForPermissions:D,canCreate:k,canDelete:N,canRead:_,canUpdate:pe,isLoading:oe,getData:W,sortedRoles:xe,roles:Q}},Pe=({getData:D,canCreate:k,canDelete:N,canUpdate:_})=>{const{formatMessage:pe}=(0,be.useIntl)(),W=(0,C.useNotification)(),[Q,oe]=(0,e.useState)(!1),{push:G}=(0,z.useHistory)(),[{selectedRoles:le,showModalConfirmButtonLoading:xe,roleToDelete:ke},Ze]=(0,e.useReducer)(Ie,ae),ot=()=>Ye(void 0,null,function*(){try{Ze({type:"ON_REMOVE_ROLES"}),yield y.be.post("/admin/roles/batch-delete",{ids:[ke]}),yield D(),Ze({type:"RESET_DATA_TO_DELETE"})}catch(q){const he=(0,$e.get)(q,["response","payload","data","ids"],null);if(he&&Array.isArray(he)){const Se=he.join(`
`);W({type:"warning",message:Se})}else W({type:"warning",message:{id:"notification.error"}})}H()}),_e=(0,e.useCallback)(q=>{G(`/settings/roles/duplicate/${q}`)},[G]),B=()=>G("/settings/roles/new"),K=(0,e.useCallback)(q=>{Ze({type:"SET_ROLE_TO_DELETE",id:q}),H()},[]),H=()=>oe(q=>!q),f=(0,e.useCallback)(q=>{G(`/settings/roles/${q}`)},[G]),Fe=(0,e.useCallback)((q,he)=>{q.preventDefault(),q.stopPropagation(),he.usersCount?W({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):K(he.id)},[W,K]),et=(0,e.useCallback)((q,he)=>{q.preventDefault(),q.stopPropagation(),_e(he.id)},[_e]),He=(0,e.useCallback)(q=>[...k?[{onClick:he=>et(he,q),label:pe({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(Ne(),null)}]:[],..._?[{onClick:()=>f(q.id),label:pe({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(F(),null)}]:[],...N?[{onClick:he=>Fe(he,q),label:pe({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(Ee(),null)}]:[]],[pe,Fe,et,f,k,_,N]);return{handleNewRoleClick:B,getIcons:He,selectedRoles:le,isWarningDeleteAllOpened:Q,showModalConfirmButtonLoading:xe,handleToggleModal:H,handleDeleteData:ot}},Je=()=>{const{formatMessage:D}=(0,be.useIntl)(),{isLoadingForPermissions:k,canCreate:N,canRead:_,canDelete:pe,canUpdate:W,isLoading:Q,getData:oe,sortedRoles:G}=Qe(),{handleNewRoleClick:le,getIcons:xe,isWarningDeleteAllOpened:ke,showModalConfirmButtonLoading:Ze,handleToggleModal:ot,handleDeleteData:_e}=Pe({getData:oe,canCreate:N,canDelete:pe,canUpdate:W}),B=G.length+1,K=6;if(k)return e.createElement(U.Main,null,e.createElement(C.LoadingIndicatorPage,null));const H=D({id:"global.roles",defaultMessage:"roles"});return e.createElement(U.Main,null,e.createElement(C.SettingsPageTitle,{name:"Roles"}),e.createElement(V.HeaderLayout,{primaryAction:N?e.createElement(S.Button,{onClick:le,startIcon:e.createElement(Z(),null),size:"S"},D({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:H,subtitle:D({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),_&&e.createElement(V.ActionLayout,{startActions:e.createElement(C.SearchURLQuery,{label:D({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:H})})}),_&&e.createElement(V.ContentLayout,null,e.createElement(te.Table,{colCount:K,rowCount:B,footer:N?e.createElement(te.TFooter,{onClick:le,icon:e.createElement(Z(),null)},D({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(te.Thead,null,e.createElement(te.Tr,null,e.createElement(te.Th,null,e.createElement(Ge.Typography,{variant:"sigma",textColor:"neutral600"},D({id:"global.name",defaultMessage:"Name"}))),e.createElement(te.Th,null,e.createElement(Ge.Typography,{variant:"sigma",textColor:"neutral600"},D({id:"global.description",defaultMessage:"Description"}))),e.createElement(te.Th,null,e.createElement(Ge.Typography,{variant:"sigma",textColor:"neutral600"},D({id:"global.users",defaultMessage:"Users"}))),e.createElement(te.Th,null,e.createElement(de.VisuallyHidden,null,D({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(te.Tbody,null,G==null?void 0:G.map(f=>e.createElement(re.Z,{key:f.id,id:f.id,name:f.name,description:f.description,usersCount:f.usersCount,icons:xe(f)})))),!B&&!Q&&e.createElement(Ke.Z,null)),e.createElement(C.ConfirmDialog,{isOpen:ke,onConfirm:_e,isConfirmButtonLoading:Ze,onToggleDialog:ot}))},qe=()=>e.createElement(C.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(Je,null))},5420:(me,x,a)=>{a.d(x,{Z:()=>ne});var e=(Z,Le,Ee)=>new Promise((fe,Ne)=>{var Y=V=>{try{S(Ee.next(V))}catch(de){Ne(de)}},F=V=>{try{S(Ee.throw(V))}catch(de){Ne(de)}},S=V=>V.done?fe(V.value):Promise.resolve(V.value).then(Y,F);S((Ee=Ee.apply(Z,Le)).next())});const ne=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component(){return e(this,null,function*(){return yield a.e(302).then(a.bind(a,29808))})},to:"/settings/single-sign-on",exact:!0}]:[]]}}]);
